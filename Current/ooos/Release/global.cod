; Listing generated by Microsoft (R) Optimizing Compiler Version 13.00.9466 

	TITLE	global.cpp
	.386P
include listing.inc
if @Version gt 510
.model FLAT
else
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
_BSS	SEGMENT DWORD USE32 PUBLIC 'BSS'
_BSS	ENDS
$$SYMBOLS	SEGMENT BYTE USE32 'DEBSYM'
$$SYMBOLS	ENDS
$$TYPES	SEGMENT BYTE USE32 'DEBTYP'
$$TYPES	ENDS
_TLS	SEGMENT DWORD USE32 PUBLIC 'TLS'
_TLS	ENDS
text$yc	SEGMENT PARA USE32 PUBLIC 'CODE'
text$yc	ENDS
CRT$XCA	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCA	ENDS
CRT$XCU	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCU	ENDS
CRT$XCL	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCL	ENDS
CRT$XCC	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCC	ENDS
CRT$XCZ	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCZ	ENDS
;	COMDAT ??0ProcessNode@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _$E1
text$yc	SEGMENT PARA USE32 PUBLIC 'CODE'
text$yc	ENDS
;	COMDAT ??2@YAPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??3@YAXPAX@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
FLAT	GROUP _DATA, CONST, _BSS
	ASSUME	CS: FLAT, DS: FLAT, SS: FLAT
endif

INCLUDELIB LIBC
INCLUDELIB OLDNAMES

PUBLIC	?CurrentProcess@@3PAVProcessNode@@A		; CurrentProcess
PUBLIC	?pDisp@@3PAVVideoDriver@@A			; pDisp
PUBLIC	?ActiveProcesses@@3PAVProcessQueue@@A		; ActiveProcesses
PUBLIC	?ReadyProcesses@@3PAVProcessQueue@@A		; ReadyProcesses
PUBLIC	?IDTAddress@@3PAKA				; IDTAddress
_BSS	SEGMENT
?CurrentProcess@@3PAVProcessNode@@A DD 01H DUP (?)	; CurrentProcess
?pDisp@@3PAVVideoDriver@@A DD 01H DUP (?)		; pDisp
?ActiveProcesses@@3PAVProcessQueue@@A DD 01H DUP (?)	; ActiveProcesses
?ReadyProcesses@@3PAVProcessQueue@@A DD 01H DUP (?)	; ReadyProcesses
?IDTAddress@@3PAKA DD 01H DUP (?)			; IDTAddress
_BSS	ENDS
PUBLIC	??2@YAPAXI@Z					; operator new
EXTRN	?Alloc@Process@@QAEPAXI@Z:NEAR			; Process::Alloc
; Function compile flags: /Ogty
; File d:\my documents\projects\ooos\current\ooos\global.cpp
;	COMDAT ??2@YAPAXI@Z
_TEXT	SEGMENT
_sz$ = 8
??2@YAPAXI@Z PROC NEAR					; operator new, COMDAT

; 22   : 		if (CurrentProcess != NULL && CurrentProcess->Proc != NULL)

  00000	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentProcess@@3PAVProcessNode@@A ; CurrentProcess
  00005	85 c0		 test	 eax, eax
  00007	74 12		 je	 SHORT $L518
  00009	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000c	85 c9		 test	 ecx, ecx
  0000e	74 0b		 je	 SHORT $L518

; 23   : 		{
; 24   : 			return CurrentProcess->Proc->Alloc(sz);

  00010	8b 44 24 04	 mov	 eax, DWORD PTR _sz$[esp-4]
  00014	50		 push	 eax
  00015	e8 00 00 00 00	 call	 ?Alloc@Process@@QAEPAXI@Z ; Process::Alloc

; 27   : 	}

  0001a	c3		 ret	 0
$L518:

; 25   : 		}
; 26   : 		return NULL;

  0001b	33 c0		 xor	 eax, eax

; 27   : 	}

  0001d	c3		 ret	 0
??2@YAPAXI@Z ENDP					; operator new
_TEXT	ENDS
PUBLIC	??3@YAXPAX@Z					; operator delete
EXTRN	?Dealloc@Process@@QAEXPAX@Z:NEAR		; Process::Dealloc
; Function compile flags: /Ogty
;	COMDAT ??3@YAXPAX@Z
_TEXT	SEGMENT
_ptr$ = 8
??3@YAXPAX@Z PROC NEAR					; operator delete, COMDAT

; 31   : 		if (CurrentProcess != NULL && CurrentProcess->Proc != NULL)

  00000	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CurrentProcess@@3PAVProcessNode@@A ; CurrentProcess
  00005	85 c0		 test	 eax, eax
  00007	74 11		 je	 SHORT $L522
  00009	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000c	85 c9		 test	 ecx, ecx
  0000e	74 0a		 je	 SHORT $L522

; 32   : 		{
; 33   : 			CurrentProcess->Proc->Dealloc(ptr);

  00010	8b 44 24 04	 mov	 eax, DWORD PTR _ptr$[esp-4]
  00014	50		 push	 eax
  00015	e8 00 00 00 00	 call	 ?Dealloc@Process@@QAEXPAX@Z ; Process::Dealloc
$L522:

; 34   : 		}
; 35   : 	}

  0001a	c3		 ret	 0
??3@YAXPAX@Z ENDP					; operator delete
_TEXT	ENDS
PUBLIC	?GDTAddress@@3PAKA				; GDTAddress
_DATA	SEGMENT
?GDTAddress@@3PAKA DD 0800H				; GDTAddress
_DATA	ENDS
END
